<span class="keyword">int</span> <span class="static">SIDE_DIM</span> <span class="operator">=</span> <span class="integer">500</span>;
<span class="keyword">int</span> <span class="static">CELLS</span> <span class="operator">=</span> <span class="integer">50</span>;
<span class="keyword">float</span> <span class="static">WIDTH</span> <span class="operator">=</span> <span class="static">SIDE_DIM</span><span class="operator">/</span><span class="static">CELLS</span>;
color foreground, bgColor;
<span class="keyword">boolean</span>[][] generation;
<span class="keyword">boolean</span> paused <span class="operator">=</span> <span class="truth">false</span>;

<span class="keyword">void</span> <span class="entity function">setup</span>(){
  <span class="entity function">size</span>(<span class="integer">500</span>, <span class="integer">500</span>);
  generation <span class="operator">=</span> <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="static">CELLS</span>][<span class="static">CELLS</span>];
  foreground <span class="operator">=</span> <span class="entity function">color</span>(<span class="integer">0</span>,<span class="integer">150</span>,<span class="integer">0</span>);
  bgColor <span class="operator">=</span> <span class="entity function">color</span>(<span class="integer">255</span>);
  <span class="entity function">frameRate</span>(<span class="integer">10</span>);
  <span class="entity function">randomize</span>();
  <span class="entity function">ellipseMode</span>(<span class="static">CENTER</span>);
  <span class="entity function">noStroke</span>();
  <span class="entity function">colorMode</span>(<span class="static">HSB</span>, <span class="static">CELLS</span><span class="operator">*</span><span class="static">CELLS</span>, <span class="integer">10</span>, <span class="integer">10</span>);
}

<span class="keyword">void</span> <span class="entity function">draw</span>(){
  <span class="entity function">background</span>(bgColor);
  <span class="entity function">if</span>(<span class="operator">!</span>paused) {
    <span class="entity function">fill</span>(foreground);
    <span class="entity function">iterate</span>();
  }
  <span class="entity function">render</span>();
}

<span class="keyword">void</span> <span class="entity function">render</span>(){
  <span class="entity function">for</span>(<span class="keyword">int</span> i <span class="operator">=</span> <span class="integer">0</span>; i <span class="operator">&lt;</span> <span class="static">CELLS</span>; i<span class="operator">++</span>) {
    <span class="entity function">for</span>(<span class="keyword">int</span> j <span class="operator">=</span> <span class="integer">0</span>; j <span class="operator">&lt;</span> <span class="static">CELLS</span>; j<span class="operator">++</span>) {
      <span class="entity function">if</span>(generation[i][j]) {
        <span class="comment">//fill(i*j, 80, 80);</span>
        <span class="entity function">ellipse</span>(i<span class="operator">*</span><span class="static">WIDTH</span> <span class="operator">+</span> <span class="static">WIDTH</span><span class="operator">/</span><span class="integer">2</span>, j<span class="operator">*</span><span class="static">WIDTH</span> <span class="operator">+</span> <span class="static">WIDTH</span><span class="operator">/</span><span class="integer">2</span>, <span class="static">WIDTH</span><span class="operator">*</span><span class="operator">.</span><span class="integer">9</span>, <span class="static">WIDTH</span><span class="operator">*</span><span class="operator">.</span><span class="integer">9</span>);
      }
    }
  }
}

<span class="keyword">void</span> <span class="entity function">randomize</span>(){
  <span class="entity function">for</span>(<span class="keyword">int</span> i <span class="operator">=</span> <span class="integer">0</span>; i <span class="operator">&lt;</span> <span class="static">CELLS</span>; i<span class="operator">++</span>) {
    <span class="entity function">for</span>(<span class="keyword">int</span> j <span class="operator">=</span> <span class="integer">0</span>; j <span class="operator">&lt;</span> <span class="static">CELLS</span>; j<span class="operator">++</span>) {
      generation[i][j] <span class="operator">=</span> <span class="entity function">(random</span>(<span class="integer">1</span>) <span class="operator">&lt;</span> <span class="integer">0</span><span class="operator">.</span><span class="integer">5</span>);
    }
  }
}

<span class="keyword">void</span> <span class="entity function">symmetryRandomize</span>() {
    <span class="entity function">for</span>(<span class="keyword">int</span> i <span class="operator">=</span> <span class="integer">0</span>; i <span class="operator">&lt;</span><span class="operator">=</span> <span class="static">CELLS</span><span class="operator">/</span><span class="integer">2</span>; i<span class="operator">++</span>) {
    <span class="entity function">for</span>(<span class="keyword">int</span> j <span class="operator">=</span> <span class="integer">0</span>; j <span class="operator">&lt;</span> <span class="static">CELLS</span>; j<span class="operator">++</span>) {
      <span class="keyword">boolean</span> isAlive <span class="operator">=</span> <span class="entity function">random</span>(<span class="integer">1</span>) <span class="operator">&lt;</span> <span class="integer">0</span><span class="operator">.</span><span class="integer">5</span>;
      generation[i][j] <span class="operator">=</span> isAlive;
      generation[<span class="static">CELLS</span><span class="operator">-</span>i<span class="operator">-</span><span class="integer">1</span>][j] <span class="operator">=</span> isAlive;
    }
  }
}

<span class="keyword">void</span> <span class="entity function">iterate</span>(){
  <span class="keyword">boolean</span>[][] newBoard <span class="operator">=</span> <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="static">CELLS</span>][<span class="static">CELLS</span>];
  <span class="entity function">for</span>(<span class="keyword">int</span> i <span class="operator">=</span> <span class="integer">0</span>; i <span class="operator">&lt;</span> <span class="static">CELLS</span>; i<span class="operator">++</span>){
    <span class="entity function">for</span>(<span class="keyword">int</span> j <span class="operator">=</span> <span class="integer">0</span>; j <span class="operator">&lt;</span> <span class="static">CELLS</span>; j<span class="operator">++</span>){
      <span class="keyword">int</span> neighbors <span class="operator">=</span> <span class="entity function">numNeighbors</span>(i,j);
      <span class="entity function">if</span>(generation[i][j]) {
        newBoard[i][j] <span class="operator">=</span> (neighbors <span class="operator">==</span> <span class="integer">2</span> <span class="operator">||</span> neighbors <span class="operator">==</span> <span class="integer">3</span>);
      } <span class="keyword">else</span> {
        newBoard[i][j] <span class="operator">=</span> (neighbors <span class="operator">==</span> <span class="integer">3</span>);
      }
    }
  }

  <span class="entity function">for</span>(<span class="keyword">int</span> i <span class="operator">=</span> <span class="integer">0</span>; i <span class="operator">&lt;</span> <span class="static">CELLS</span>; i<span class="operator">++</span>) {
    <span class="entity function">for</span>(<span class="keyword">int</span> j <span class="operator">=</span> <span class="integer">0</span>; j <span class="operator">&lt;</span> <span class="static">CELLS</span>; j<span class="operator">++</span>) {
      generation[i][j] <span class="operator">=</span> newBoard[i][j];
      <span class="entity function">if</span>(generation[i][j]) {
      }
    }
  }

}

<span class="keyword">int</span> <span class="entity function">numNeighbors</span>(<span class="keyword">int</span> i, <span class="keyword">int</span> j){
  <span class="keyword">int</span> neighbors <span class="operator">=</span> <span class="integer">0</span>;
  <span class="entity function">for</span>(<span class="keyword">int</span> k <span class="operator">=</span> <span class="operator">-</span><span class="integer">1</span>; k <span class="operator">&lt;</span><span class="operator">=</span> <span class="integer">1</span>; k<span class="operator">++</span>){
    <span class="entity function">for</span>(<span class="keyword">int</span> l <span class="operator">=</span> <span class="operator">-</span><span class="integer">1</span>; l <span class="operator">&lt;</span><span class="operator">=</span> <span class="integer">1</span>; l<span class="operator">++</span>){
      <span class="entity function">if(!</span>(l<span class="operator">==</span><span class="integer">0</span> <span class="operator">&amp;&amp;</span> k<span class="operator">==</span><span class="integer">0</span>)){
        <span class="entity function">if(generation[(i+k+CELLS)%CELLS][</span>(j<span class="operator">+</span>l<span class="operator">+</span><span class="static">CELLS</span>)<span class="operator">%</span><span class="static">CELLS</span>] <span class="operator">==</span> <span class="truth">true</span>){
          neighbors<span class="operator">++</span>;
        }
      }
    }
  }
  <span class="keyword">return</span> neighbors;
}

<span class="keyword">void</span> <span class="entity function">mousePressed</span>(){
 <span class="keyword">int</span> x,y;
 x <span class="operator">=</span> <span class="entity function">(int)</span>(mouseX<span class="operator">/</span><span class="static">WIDTH</span>);
 y <span class="operator">=</span> <span class="entity function">(int)</span>(mouseY<span class="operator">/</span><span class="static">WIDTH</span>);

 generation[x][y] <span class="operator">=</span> <span class="operator">!</span>generation[x][y]; 
}

<span class="keyword">void</span> <span class="entity function">keyPressed</span>(){
 <span class="entity function">if</span>(key <span class="operator">==</span> <span class="static">CODED</span>) {
    <span class="entity function">if</span>(keyCode <span class="operator">==</span> <span class="static">SHIFT</span>) {
       <span class="entity function">randomize</span>();
    }
 } <span class="keyword">else</span> <span class="entity function">if</span>(key <span class="operator">==</span> <span class="char">' '</span>){
   paused <span class="operator">=</span> <span class="operator">!</span>paused; 
 }  <span class="keyword">else</span> <span class="entity function">if</span>(key <span class="operator">==</span> <span class="static">ENTER</span> <span class="operator">||</span> key <span class="operator">==</span> <span class="static">RETURN</span>) {
       <span class="entity function">symmetryRandomize</span>(); 
    }
}